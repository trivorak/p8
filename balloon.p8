pico-8 cartridge // http://www.pico-8.com
version 41
__lua__

function _init()
	bgcolor = 1
	air = 1
	hcolor = 5
	angle = 0
	popped = false
	cx = 128/2
	cy = 128/2
	ballcolor = 11
	speed = 7
	rel = false
	invx = false
	invy = false
	lnx = false
	lny = false
	invxv = 1
	invyv = 1
	lastrandom = 0
	currentrandom = 0
end 

function _update()

	if(cx+air/2>127) then
		invx = callinverse(invx)
		cx = 127 - air/2
	end
	if (cx-air/2<0) then
		invx = callinverse(invx)
		cx = air/2-1
	end
	if (cy+air/2>127) then
		invy = callinverse(invy)
		cy = 127 - air/2
	end
	if (cy - air/2<0) then
		invy = callinverse(invy)
		cy = air/2 + 1
	end
	
	if invx == true then invxv = -1 end
	if invx == false then invxv = 1 end
	if invy == true then invyv = -1 end
	if invy == false then invyv = 1 end
	
	
-- controls
	if (btn(0)) then 
		angle -= 5
	end

	if (btn(1)) then 
		angle += 5 
	end
	
	if (btn(2)) and (popped == false) then 
		air += 2 
	end
	
	if (btn(3)) and (popped == false) then
		air -= 2 
	end
	
	if (btn(4)) then
		cx = cx + mvx * -1 * invxv
		cy = cy + mvy * -1 * invyv
		currentrandom = rnd(10)-5 + lastrandom/1.08
		angle = angle + currentrandom
		lastrandom = currentrandom
		air -= 0.4
				
		if air < 25 then
			air -= 1.0
		end
	end
	
	if (btn(5)) then rel=true end
	
	if (air>0) and (rel==true) then moveballoon() end
	
	if air==0 then rel=false end
	
	--mod angle
	angle = mod(angle,365)
	--clamp air
	if air >= 100 then air = 100 end
	if air <= 0 then air = 0 end
	
	lnx = sinx(air/2,angle)*invxv+cx
	lny = cosy(air/2,angle)*invyv+cy
	mvx = sinx(speed,angle)
	mvy = cosy(speed,angle)
	
end

function _draw()
	cls(bgcolor)
	circ(cx,cy,air/2,ballcolor)
	line(cx,cy,lnx,lny,ballcolor)
	
	if air > 10 then
		circ(lnx,lny,3,ballcolor)
	end
	--debug
	print("angle = " .. angle,0,0,2)
	print("air = " .. air,0,6,2)
end

function callinverse(input)
	if input == true then
		return false
	elseif input == false then
		return true
	end
end

function mod(input,base)
	return input - (flr(input/base)*base)
end

function sinx(rad,ang)
	return rad*sin(ang/365)
end

function cosy(rad,ang)
	return rad*cos(ang/365)
end

function moveballoon()
	cx = cx + mvx * -1 * invxv
	cy = cy + mvy * -1 * invyv
	currentrandom = rnd(10)-5 + lastrandom/1.08
	angle = angle + currentrandom
	lastrandom = currentrandom
	air -= 0.4
				
	if air < 25 then
		air -= 1.0
	end
		
end

__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888eeeeee888888888888888888888888888888888888888888888888888888888888888888888888ff8ff8888228822888222822888888822888888228888
8888ee888ee88888888888888888888888888888888888888888888888888888888888888888888888ff888ff888222222888222822888882282888888222888
888eee8e8ee88888e88888888888888888888888888888888888888888888888888888888888888888ff888ff888282282888222888888228882888888288888
888eee8e8ee8888eee8888888888888888888888888888888888888888888888888888888888888888ff888ff888222222888888222888228882888822288888
888eee8e8ee88888e88888888888888888888888888888888888888888888888888888888888888888ff888ff888822228888228222888882282888222288888
888eee888ee888888888888888888888888888888888888888888888888888888888888888888888888ff8ff8888828828888228222888888822888222888888
888eeeeeeee888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
111111111166161611111111111116661666166611171ccc11111cc1111111111111111111111111111111111111111111111111111111111111111111111111
11111111161116161111177711111616116116161171111c111111c1111111111111111111111111111111111111111111111111111111111111111111111111
111111111611116111111111111116661161166111711ccc177711c1111111111111111111111111111111111111111111111111111111111111111111111111
111111111611161611111777111116161161161611711c11111111c1111111111111111111111111111111111111111111111111111111111111111111111111
111111111166161611111111111116161666161617111ccc11111ccc111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111eee1ee11ee11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111e111e1e1e1e1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111ee11e1e1e1e1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111e111e1e1e1e1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111eee1e1e1eee1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111eee1eee1111117111661616111116661666166611171ccc17111cc11ccc1ccc117111111eee1e1e1eee1ee1111111111111111111111111111111111111
111111e11e11111117111611161611711616116116161171111c117111c1111c111c1117111111e11e1e1e111e1e111111111111111111111111111111111111
111111e11ee11111171116111666177716661161166111711ccc111711c11ccc111c1117111111e11eee1ee11e1e111111111111111111111111111111111111
111111e11e111111171116111116117116161161161611711c11117111c11c11111c1117111111e11e1e1e111e1e111111111111111111111111111111111111
11111eee1e111111117111661666111116161666161617111ccc17111ccc1ccc111c1171111111e11e1e1eee1e1e111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111166616611616161611111111111111661666161116111666166116161666166611661666117116661661161616161171111111111111111111111111
11111111116116161616161611111777111116111616161116111161161616161611161616111611171111611616161616161117111111111111111111111111
11111111116116161616166611111111111116111666161116111161161616161661166116661661171111611616161616661117111111111111111111111111
11111111116116161666111611111777111116111616161116111161161616661611161611161611171111611616166611161117111111111111111111111111
11111111166616161161166611111111111111661616166616661666161611611666161616611666117116661616116116661171111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111116616161111111111111cc11ccc1ccc11111111111116661666166611171ccc11111111111111111111111111111111111111111111111111111111
111111111611161611111777111111c1111c111c1111111111111616116116161171111c11111111111111111111111111111111111111111111111111111111
111111111611166611111111111111c11ccc111c11111777111116661161166111711ccc11111111111111111111111111111111111111111111111111111111
111111111611111611111777111111c11c11111c11111111111116161161161611711c1111111111111111111111111111111111111111111111111111111111
11111111116616661111111111111ccc1ccc111c11111111111116161666161617111ccc11111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111eee1ee11ee11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111e111e1e1e1e1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111ee11e1e1e1e1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111e111e1e1e1e1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111eee1e1e1eee1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111eee1eee111111711166161611111111111116661666166611171ccc11171ccc117111111eee1e1e1eee1ee1111111111111111111111111111111111111
111111e11e1111111711161116161111111111111616116116161171111c11711c1c1117111111e11e1e1e111e1e111111111111111111111111111111111111
111111e11ee1111117111611166611111777111116661161166111711ccc17111c1c1117111111e11eee1ee11e1e111111111111111111111111111111111111
111111e11e11111117111611111611111111111116161161161611711c1111711c1c1117111111e11e1e1e111e1e111111111111111111111111111111111111
11111eee1e11111111711166166611111111111116161666161617111ccc11171ccc1171111111e11e1e1eee1e1e111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111166616611616161611111111111111661666161116111666166116161666166611661666117116661661161616161171111111111111111111111111
11111111116116161616161611111777111116111616161116111161161616161611161616111611171111611616161616161117111111111111111111111111
11111111116116161616166611111111111116111666161116111161161616161661166116661661171111611616161616661117111111111111111111111111
11111111116116161666111611111777111116111616161116111161161616661611161611161611171111611616166611161117111111111111111111111111
11111111166616161161166611111111111111661616166616661666161611611666161616611666117116661616116116661171111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111166161611111111111116661666166611171ccc1111111111111cc11111111111111111111111111111111111111111111111111111111111111111
11111111161116161111177711111616116116161171111c11111171111111c11111111111111111111111111111111111111111111111111111111111111111
111111111611166611111111111116661161166111711ccc11111777111111c11111111111111111111111111111111111111111111111111111111111111111
111111111611111611111777111116161161161611711c1111111171111111c11111111111111111111111111111111111111111111111111111111111111111
111111111166166611111111111116161666161617111ccc1111111111111ccc1111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111eee1ee11ee11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111e111e1e1e1e1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111ee11e1e1e1e1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111e111e1e1e1e1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111eee1e1e1eee1111111111117111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111117711111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111117771111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111117777111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111117711111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111171111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11118888811111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11118eee8eee1111166616611616161611111111111111111ccc1ccc1c1c1ccc11111eee1e1e1eee1ee111111666166116161616161611111111111111111cc1
111188e88e1111111161161616161616111117771777111111c11c1c1c1c1c11111111e11e1e1e111e1e111111611616161616161616111117771111111111c1
111188e88ee111111161161616161161111111111111111111c11cc11c1c1cc1111111e11eee1ee11e1e1111116116161616116116161111111111111ccc11c1
111188e88e1111111161161616661616111117771777111111c11c1c1c1c1c11111111e11e1e1e111e1e111111611616166616161666111117771111111111c1
11118eee8e1111111666161611611616111111111111111111c11c1c11cc1ccc111111e11e1e1eee1e1e11111666161611611616116111111111111111111ccc
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111eee1eee1111166616611616161611111111111111111ccc1ccc1c1111cc1ccc11111eee1e1e1eee1ee11111166616611616161616161111111111111cc1
111111e11e111111116116161616161611111777177711111c111c1c1c111c111c11111111e11e1e1e111e1e11111161161616161616161611111777111111c1
111111e11ee11111116116161616116111111111111111111cc11ccc1c111ccc1cc1111111e11eee1ee11e1e11111161161616161161161611111111111111c1
111111e11e111111116116161666161611111777177711111c111c1c1c11111c1c11111111e11e1e1e111e1e11111161161616661616166611111777111111c1
11111eee1e111111166616161161161611111111111111111c111c1c1ccc1cc11ccc111111e11e1e1eee1e1e1111166616161161161611611111111111111ccc
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111eee1eee1111166616611616161611111111111111111ccc1ccc1c1c1ccc11111eee1e1e1eee1ee111111666166116161616161611111111111111111cc1
111111e11e1111111161161616161616111117771777111111c11c1c1c1c1c11111111e11e1e1e111e1e111111611616161616161616111117771111111111c1
111111e11ee111111161161616161666111111111111111111c11cc11c1c1cc1111111e11eee1ee11e1e1111116116161616166616161111111111111ccc11c1
111111e11e1111111161161616661116111117771777111111c11c1c1c1c1c11111111e11e1e1e111e1e111111611616166611161666111117771111111111c1
11111eee1e1111111666161611611666111111111111111111c11c1c11cc1ccc111111e11e1e1eee1e1e11111666161611611666116111111111111111111ccc
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111eee1eee1111166616611616161611111111111111111ccc1ccc1c1111cc1ccc11111eee1e1e1eee1ee11111166616611616161616161111111111111cc1
111111e11e111111116116161616161611111777177711111c111c1c1c111c111c11111111e11e1e1e111e1e11111161161616161616161611111777111111c1
111111e11ee11111116116161616166611111111111111111cc11ccc1c111ccc1cc1111111e11eee1ee11e1e11111161161616161666161611111111111111c1
111111e11e111111116116161666111611111777177711111c111c1c1c11111c1c11111111e11e1e1e111e1e11111161161616661116166611111777111111c1
11111eee1e111111166616161161166611111111111111111c111c1c1ccc1cc11ccc111111e11e1e1eee1e1e1111166616161161166611611111111111111ccc
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111eee1eee111111711bbb1bbb1bb111711ccc1171117111111eee1e1e1eee1ee1111111111111111111111111111111111111111111111111111111111111
111111e11e11111117111b1b11b11b1b17111c1c11171117111111e11e1e1e111e1e111111111111111111111111111111111111111111111111111111111111
111111e11ee1111117111bb111b11b1b17111c1c11171117111111e11eee1ee11e1e111111111111111111111111111111111111111111111111111111111111
111111e11e11111117111b1b11b11b1b17111c1c11171117111111e11e1e1e111e1e111111111111111111111111111111111111111111111111111111111111
11111eee1e11111111711bbb11b11b1b11711ccc11711171111111e11e1e1eee1e1e111111111111111111111111111111111111111111111111111111111111
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
82888222822882228888828282228882822882288228888888888888888888888888888888888888888888888282822282228882822282288222822288866688
82888828828282888888828288828828882888288828888888888888888888888888888888888888888888888282828282828828828288288282888288888888
82888828828282288888822282228828882888288828888888888888888888888888888888888888888888888222828282228828822288288222822288822288
82888828828282888888888282888828882888288828888888888888888888888888888888888888888888888882828288828828828288288882828888888888
82228222828282228888888282228288822282228222888888888888888888888888888888888888888888888882822288828288822282228882822288822288
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888

