pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
air = 0
hcolor = 0
angle = 0
popped = false
cx = 128/2
cy = 128/2
ballcol = 2

function _init()
end

function _update()
	if (btn(2)) and (popped == false) then 
		air = air + 2 
	else air = air - 0.5
	end
	
	if (btn(2) == false) and (popped == true) then 
		popped = false 
	end
	
	if (air>100) then 
		air = 0  
		popped = true
		sfx(0) 
	end
	
	if (air<0) then air = 0 end
	if (btn(1)) then angle = angle + 5 end
	if (btn(0)) then angle = angle - 5 end
	if (angle > 359) then angle = 0 end
	if (angle < 0) then angle = 359 end
	healthclr()
	if (btnp(3)) then ballcol = ballcol + 1 end
	if (ballcol>15) then ballcol = 1 end
end

function _draw()
	cls()
	mkhealth()
	circfill(cx,cy,air/2,ballcol)
	if (air>12) then circfill(cx+getsinx(air/2,angle),cy+getcosy(air/2,angle),5,ballcol) end
	print("p = " .. tostr(popped),0,7,12)
	print("an = " .. angle,0,14,12)
--	line(cx,cy,cx+getsinx(air/2,angle),cy+getcosy(air/2,angle),9)
end

function mkhealth()
	--make line rectangle
	rectfill(0,128,1,128-(air+2),hcolor)
	print("a = ".. air,0,0,12)
end

function healthclr()
	--change health color based on amount
	if (air < 90) then hcolor = 10 end
	if (air > 90) then hcolor = 9 end
	if (air > 95) then hcolor = 8 end
end

function getcosy(rad,ang)
	return rad*(cos(ang/360))
end

function getsinx(rad,ang)
	return rad*(sin(ang/360) *-1)
end

__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000100002265008650046500165000650000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
